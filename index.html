
<!DOCTYPE html>

<html>

<head>
	<title>LaTex-to-MathML Test Page</title>
	
<!--MathJax Scripts-->
	<!--This script is system; don't touch-->
	<script>
		function toMathML(jax,callback) 
		{
		  var mml;
		  try {
			mml = jax.root.toMathML("");
		  } catch(err) {
			if (!err.restart) {throw err} // an actual error
			return MathJax.Callback.After([toMathML,jax,callback],err.restart);
		  }
		  MathJax.Callback(callback)(mml);
		}
		
		
		</script>

	<script  type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		
		MathJax.Hub.Config({
		config: ["MMLorHTML.js"],
		extensions: ["tex2jax.js", "toMathML.js", "mml2jax.js"], /*Added mml2jax,js*/
		jax: ["input/TeX", "input/MathML"], /*Added input/MathML*/
		tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},
		mml2jax: {preview: "none"} /*Added this line*/
		});
		
		var outputTextBox = document.getElementById("outputTextArea");
		var latexHTML = document.getElementById("Latex");
		var latexDupe = document.getElementById("Latex Duplicate");
		var inputTextBox = document.getElementById("inputTextArea");
		var mathMLGraphicBox = document.getElementById("outputGraphicArea");
		var latexExample = document.getElementById("Latex Example");
		latexExample.style.display = "none";
		latexDupe.style.display = "none";
		
		function editLatex()
		{
			inputTextBox.value = latexDupe.innerHTML;
			
			outputTextBox.value = "";
		}
		
		function example()
		{
			inputTextBox.value = latexExample.innerHTML;
		}
		
		function convertMathMLToLatex() 
		{
			outputTextBox.value = "";
			
			var input = inputTextBox.value;
			
			latexHTML.innerHTML = "$$" + input + "$$";
			latexDupe.innerHTML = input;
			
			MathJax.Hub.Queue(["Typeset",MathJax.Hub, "Latex"]);
			
			var jax = MathJax.Hub.getAllJax();
			
			for (var i = 0; i < jax.length; i++)
			{
				toMathML(jax[i],function (mml) 
				{
					outputTextBox.value += mml + "\n\n\n";
					//htmlObjOutputTextArea.value += jax[i].originalText + "\n\n=>\n\n"+ mml + "\n\n\n";
				});
			}
			
			inputTextBox.value = "";
			
			//MathJax.Hub.Queue(["Typeset",MathJax.Hub, "MathML Duplicate"]);
			
			var x = document.getElementsByTagName("svg");
			
			for (var i = 0; i < x.length; i++)
			{
				mathMLGraphicBox.value += x[i] + "\n\n\n";
			}
			
			//mathMLGraphicBox.value = latexHTML.innerHTML;
		}
		
		function clearAll()
		{
			outputTextBox.value = "";
			inputTextBox.value = "";
			latexHTML.innerHTML = "";
		}
		
			// Output the MathML.
			// $( ".raw-MathML-output" ).text(jax[i].originalText + "\n\n=>\n\n"+ mml);
	</script>
	
	
	
	<!-- (Test Feb 17, 2015) It came out: / 
	The server directory structure is: /var/www/cgi-bin ... Above means the root of this.
	This is after I changed the DocumentRoot (sites-available) to /var/www/cgi-bin to get index.pl working
	The DocumentRoot was changed back to /var/www
	-->
	<!--
	<script type="text/JavaScript">
		alert("document.location.pathname: " + document.location.pathname);   
	</script>
	-->
	
	<!--script type="text/javascript" src="./../LatexConverter/js/LatexToMathML.js"></script><!--src="http://www.mathtowebonline.com/js/mathtoweb_online.js"-->
	<link rel="stylesheet" href="./../LatexConverter/style.css" type="text/css" />
	<!--link rel="shortcut icon" href="./../images/mathtoweb16x16.ico" type="image/x-icon" /-->
	

</head>

<body>

<!-- Main Title -->
<h1>Convert LaTeX to Presentation MathML Test Page</h1>
<p>This is a test tool that converts LaTex into MathML, and displays various useful outputs.</p>
<br/>
<a href="http://artofproblemsolving.com/wiki/index.php/LaTeX:Examples">Some examples of LaTex, which can be handy for testing.</a>

<p id="Latex Example">x = {-b \pm \sqrt{b^2-4ac} \over 2a}</p>

<div style="margin-bottom: 2em;"></div>



<!--p>This is what gets pulled into MathJax. When you click the Convert Button, it'll get put the ALREADY converted MathML into the text box below.</p>
<!-- The rendered MathML is displayed in this window. -->
<!-- See: http://wickham43.net/divboxes.php  for position: fixed;   -->
<!-- position: fixed;   keeps the window in place, even if the user scrolls. -->
<div id="show_rendered_mathml_window" style="display: none; position: fixed; top: 3em; left: 5em; width: 80%; height: 75%; background-color: #e0e0e0; border: 2px outset #e0e0e0; padding: 1em; ">
	
	<button id="close_button" style="width: 100%;" type="button" class="close_button" onclick="hideRenderedMathMLWindow();" title="Close">Close</button>
	
</div>

<!--<div style="clear: both; float: left; padding-bottom: 2em; margin-left: 1.2em; border: 2px outset #e0e0e0;">-->
<div style="padding-bottom: 2em; margin-left: auto; margin-right: auto; border: 2px outset #e0e0e0; width: 75%;">


<form name="mathtoweb_converter_form" id="mathtoweb_converter_form" class="mathtoweb_converter_form_style">

	<table id="main_converter_table" border="0">
		<tr>
			<td valign="bottom">

				<!--<input type="button" class="convert_button" onclick="convertMathMLToLatex();" onkeyup="convertMathMLToLatex();" value="Convert" title="Convert LaTeX to MathML" />-->
				<button type="button" class="convert_button" id="convert_button" onclick="convertMathMLToLatex();" title="Convert LaTeX to MathML.">Convert</button>


				<input type="button" class="clear_button" id="clear_button" onclick="clearAll();"  value="Clear" title="Clear all" />  <!--onkeyup="clearAll();" why was this in here? -->

				<input type="button" class="clear_button" id="edit_button" onclick="editLatex();"  value="Edit" title="Edit Latex" />
				
				<input type="button" class="clear_button" id="example_button" onclick="example();"  value="Example" title="Auto-Fill Example" />
				<!--span id="countdown_timer" class="countdown_timer" title="Time remaining."></span> <!---->

				<!--span id="show_hide_configure_link_span"><a href="" onclick="showMainConfigureSection(event); return false;" class="show_hide_configure_link" title="Show the Configure section">Configure</a></span -->

			</td>
		</tr>

		<tr>
			<td colspan="3" style="padding-top: 0.6em;">
				<span class="input_area_title" id="inputAreaTitle"><u>Paste</u> (or type) your LaTeX into the box below:</span>
			</td>
		</tr>

		<tr>
			<td colspan="3" style="padding-top: 0.6em;">
				<!-- See http://www.tizag.com/htmlT/htmltextarea.php for information on 'wrap' -->
				<textarea class="input_text" name="inputTextArea" id="inputTextArea" rows="16" cols="110" wrap="off"></textarea>
			</td>

		</tr>

		<tr>
			<td colspan="1" style="height: 3em">
				<span class="output_area_title" id="outputAreaTitle">The converter generated the following Graphic from your LaTeX:</span>
			</td>
		</tr>
		
		<tr>
			<td colspan="3">
				<div id="graphic">
					<p id="Latex"></p>
				</div>
			</td>
		</tr>
		
		<tr>
			<td colspan="1" style="height: 3em">
				<span class="output_area_title" id="outputAreaTitle">The converter generated the following Description (not implemented):</span>
			</td>
		</tr>
		
		<tr>
			<td colspan="3">
				<div id="description">
					<p id="Math Description"></p>
				</div>
			</td>
		</tr>
		
		<tr>
			<td colspan="1" style="height: 3em">
				<span class="output_area_title" id="outputAreaTitle">The converter generated the following MathML from your LaTeX:</span>
			</td>

		</tr>
		
		<tr>
			<td colspan="3">
				<textarea class="output_text" name="outputTextArea" id="outputTextArea" rows="16" cols="110" wrap="off" readonly></textarea>
				<!--p id="Latex"><!--$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}$$></p-->
				
			</td>

		</tr>


	</table>

</form>

<p id="Latex Duplicate"><!--$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}$$--></p>
<p id="Latex Example">x = {-b \pm \sqrt{b^2-4ac} \over 2a}</p>

</div>

<!--<div id="iframe_display_mathml_div" style="float: left; padding-left: 4em; padding-top: 1em;">
	<iframe id="iframe_display_mathml" name="iframe_display_mathml" src="./../iframe_src_with_xhtml_template.xml" style="border: 1px solid #e0e0e0; padding-top: 20px; padding-left: 27px; padding-bottom: 20px; padding-right: 27px; width: 640; height: 300;" scrolling="auto">Your browser is incapable of viewing iframe elements.</iframe>
</div>-->

<!-- This seems to do the job of clearing the 'float' above. -->
<!---->
<div style="clear: both;">  
<br/><br/><br/><br/>
</div>



</body>

</html>

